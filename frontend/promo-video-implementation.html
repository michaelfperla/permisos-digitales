<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Permisos Digitales - Promo Video</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #000;
            overflow: hidden;
            position: relative;
        }
        
        /* Video Container */
        .video-container {
            width: 100vw;
            height: 100vh;
            position: relative;
            background: #000;
        }
        
        /* Scenes */
        .scene {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease-in-out;
        }
        
        .scene.active {
            opacity: 1;
            visibility: visible;
        }
        
        /* Scene 1: The Problem - Government Office */
        .scene-problem {
            background: linear-gradient(to bottom, #e5e5e5 0%, #d0d0d0 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .waiting-room {
            width: 100%;
            height: 100%;
            position: relative;
            filter: desaturate(50%);
        }
        
        .clock {
            position: absolute;
            top: 50px;
            right: 50px;
            width: 150px;
            height: 150px;
            background: white;
            border-radius: 50%;
            border: 8px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: bold;
            color: #333;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .clock::before,
        .clock::after {
            content: '';
            position: absolute;
            background: #333;
            transform-origin: center bottom;
        }
        
        .clock::before {
            width: 4px;
            height: 40px;
            bottom: 50%;
            animation: hourHand 10s linear infinite;
        }
        
        .clock::after {
            width: 2px;
            height: 50px;
            bottom: 50%;
            animation: minuteHand 2s linear infinite;
        }
        
        @keyframes hourHand {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes minuteHand {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .queue-people {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 70%;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            padding: 0 50px;
        }
        
        .person {
            width: 60px;
            height: 180px;
            background: #666;
            border-radius: 30px 30px 0 0;
            position: relative;
            animation: sway 4s ease-in-out infinite;
            opacity: 0;
            transform: translateY(100px);
        }
        
        .person.show {
            animation: personAppear 0.5s ease-out forwards, sway 4s ease-in-out infinite 0.5s;
        }
        
        .person::before {
            content: '';
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: #888;
            border-radius: 50%;
        }
        
        .person:nth-child(odd) { animation-delay: 0.2s; }
        .person:nth-child(even) { animation-delay: 0.4s; }
        
        @keyframes personAppear {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes sway {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(-5px) rotate(-1deg); }
            75% { transform: translateX(5px) rotate(1deg); }
        }
        
        .ticket-number {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px 60px;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            font-size: 48px;
            font-weight: bold;
            color: #333;
            opacity: 0;
            animation: fadeInScale 1s ease-out 1.5s forwards;
        }
        
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }
        
        .time-lost-text {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 48px;
            font-weight: bold;
            color: #B5384D;
            opacity: 0;
            animation: fadeInUp 1s ease-out 3s forwards;
        }
        
        /* Scene 2: The Solution Discovery */
        .scene-discovery {
            background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .phone-mockup {
            width: 300px;
            height: 600px;
            background: #1f1f1f;
            border-radius: 40px;
            position: relative;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            transform: scale(0.8) rotate(5deg);
            opacity: 0;
            animation: phoneAppear 1s ease-out 0.5s forwards;
        }
        
        @keyframes phoneAppear {
            to {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
        }
        
        .phone-screen {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
            background: white;
            border-radius: 20px;
            overflow: hidden;
        }
        
        .search-animation {
            padding: 20px;
            opacity: 0;
            animation: fadeIn 0.5s ease-out 1.5s forwards;
        }
        
        .search-bar {
            background: #f5f5f5;
            padding: 15px 20px;
            border-radius: 30px;
            font-size: 16px;
            color: #333;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .search-text {
            display: inline-block;
            animation: typing 2s steps(30) 2s forwards;
            white-space: nowrap;
            overflow: hidden;
            width: 0;
        }
        
        @keyframes typing {
            to { width: 100%; }
        }
        
        .search-results {
            opacity: 0;
            animation: fadeInUp 0.5s ease-out 4s forwards;
        }
        
        .result-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .result-item:hover {
            background: #f5f5f5;
        }
        
        .result-item.highlight {
            background: #FFF3CD;
            animation: pulse 0.8s ease-in-out;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        /* Scene 3: The Solution Demo */
        .scene-demo {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .demo-container {
            display: flex;
            gap: 50px;
            align-items: center;
        }
        
        .laptop-mockup {
            width: 600px;
            height: 400px;
            background: #ddd;
            border-radius: 10px;
            position: relative;
            transform: perspective(1000px) rotateY(-10deg);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }
        
        .laptop-screen {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 60px;
            background: white;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .form-demo {
            padding: 30px;
            opacity: 0;
            animation: fadeIn 0.5s ease-out 0.5s forwards;
        }
        
        .form-field {
            margin-bottom: 20px;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .form-field.show {
            animation: fadeInUp 0.5s ease-out forwards;
        }
        
        .form-field label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }
        
        .form-field input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .form-field input:focus {
            border-color: #B5384D;
            outline: none;
        }
        
        .progress-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            opacity: 0;
            animation: fadeIn 0.5s ease-out 1s forwards;
        }
        
        .progress-step {
            flex: 1;
            text-align: center;
            position: relative;
        }
        
        .progress-step::after {
            content: '';
            position: absolute;
            top: 15px;
            left: 50%;
            width: 100%;
            height: 2px;
            background: #e0e0e0;
            z-index: -1;
        }
        
        .progress-step:last-child::after {
            display: none;
        }
        
        .progress-circle {
            width: 30px;
            height: 30px;
            background: #e0e0e0;
            border-radius: 50%;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            transition: all 0.3s ease;
        }
        
        .progress-step.active .progress-circle {
            background: #B5384D;
            transform: scale(1.2);
        }
        
        .progress-step.completed .progress-circle {
            background: #10B981;
        }
        
        /* Scene 4: Success */
        .scene-success {
            background: linear-gradient(to bottom, #065F46 0%, #10B981 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .success-content {
            text-align: center;
            color: white;
        }
        
        .success-icon {
            width: 150px;
            height: 150px;
            background: white;
            border-radius: 50%;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            color: #10B981;
            opacity: 0;
            transform: scale(0);
            animation: successPop 0.6s ease-out 0.5s forwards;
        }
        
        @keyframes successPop {
            to {
                opacity: 1;
                transform: scale(1);
            }
            60% {
                transform: scale(1.1);
            }
        }
        
        .success-message {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 20px;
            opacity: 0;
            animation: fadeInUp 0.8s ease-out 1s forwards;
        }
        
        .permit-preview {
            background: white;
            color: #333;
            padding: 30px;
            border-radius: 10px;
            margin: 30px auto;
            max-width: 400px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            opacity: 0;
            transform: translateY(30px) scale(0.9);
            animation: permitAppear 0.8s ease-out 1.5s forwards;
        }
        
        @keyframes permitAppear {
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        /* Scene 5: Call to Action */
        .scene-cta {
            background: linear-gradient(135deg, #B5384D 0%, #8B2D3D 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            color: white;
            text-align: center;
        }
        
        .logo-large {
            font-size: 72px;
            font-weight: 900;
            margin-bottom: 20px;
            opacity: 0;
            transform: scale(0.8);
            animation: logoReveal 1s ease-out 0.5s forwards;
        }
        
        @keyframes logoReveal {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .cta-message {
            font-size: 32px;
            margin-bottom: 40px;
            opacity: 0;
            animation: fadeInUp 0.8s ease-out 1s forwards;
        }
        
        .cta-button {
            display: inline-block;
            padding: 20px 60px;
            background: white;
            color: #B5384D;
            text-decoration: none;
            border-radius: 50px;
            font-size: 24px;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            opacity: 0;
            animation: fadeInUp 0.8s ease-out 1.5s forwards;
        }
        
        .cta-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        }
        
        .url-display {
            font-size: 24px;
            margin-top: 30px;
            opacity: 0.9;
            opacity: 0;
            animation: fadeIn 0.8s ease-out 2s forwards;
        }
        
        /* Animated Cursor */
        .animated-cursor {
            position: absolute;
            width: 30px;
            height: 30px;
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
        }
        
        .animated-cursor.visible {
            opacity: 1;
        }
        
        .animated-cursor::before {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 24px solid #FFD700;
            transform: rotate(45deg);
            transform-origin: 20% 40%;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }
        
        .animated-cursor.clicking::after {
            content: '';
            position: absolute;
            width: 40px;
            height: 40px;
            border: 3px solid #FFD700;
            border-radius: 50%;
            left: -5px;
            top: -5px;
            animation: clickRing 0.5s ease-out;
        }
        
        @keyframes clickRing {
            from {
                transform: scale(0.5);
                opacity: 1;
            }
            to {
                transform: scale(1.5);
                opacity: 0;
            }
        }
        
        /* Global Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Progress Bar */
        .video-progress {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255,255,255,0.2);
            z-index: 10000;
        }
        
        .video-progress-fill {
            height: 100%;
            background: #FFD700;
            width: 0%;
            transition: width 0.1s linear;
        }
        
        /* Scene Timer Display */
        .scene-timer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 14px;
            z-index: 10000;
            opacity: 0;
        }
        
        .scene-timer.visible {
            opacity: 1;
        }
        
        /* Particles for success scene */
        .particle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #FFD700;
            border-radius: 50%;
            opacity: 0;
        }
        
        .particle.animate {
            animation: particleFloat 3s ease-out forwards;
        }
        
        @keyframes particleFloat {
            0% {
                opacity: 1;
                transform: translateY(0) scale(0);
            }
            50% {
                opacity: 1;
                transform: translateY(-200px) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-400px) scale(0.5);
            }
        }
    </style>
</head>
<body>
    <div class="video-container">
        <!-- Animated Cursor -->
        <div class="animated-cursor" id="cursor"></div>
        
        <!-- Scene 1: The Problem -->
        <div class="scene scene-problem active" data-duration="8000">
            <div class="waiting-room">
                <div class="clock" id="clock">11:47</div>
                <div class="queue-people">
                    <div class="person"></div>
                    <div class="person"></div>
                    <div class="person"></div>
                    <div class="person"></div>
                    <div class="person"></div>
                    <div class="person"></div>
                    <div class="person"></div>
                    <div class="person"></div>
                </div>
                <div class="ticket-number">C-125</div>
                <div class="time-lost-text">4 horas perdidas...</div>
            </div>
        </div>
        
        <!-- Scene 2: Discovery -->
        <div class="scene scene-discovery" data-duration="5000">
            <div class="phone-mockup">
                <div class="phone-screen">
                    <div class="search-animation">
                        <div class="search-bar">
                            <span class="search-text">permiso circulación en línea</span>
                        </div>
                        <div class="search-results">
                            <div class="result-item">Permisos tradicionales - Gov.mx</div>
                            <div class="result-item highlight">
                                <strong>Permisos Digitales</strong> - 5 minutos
                                <br><small>✓ Sin filas ✓ 24/7 ✓ $150 MXN</small>
                            </div>
                            <div class="result-item">Gestorías - Desde $500</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Scene 3: Demo -->
        <div class="scene scene-demo" data-duration="20000">
            <div class="demo-container">
                <div class="laptop-mockup">
                    <div class="laptop-screen">
                        <div class="form-demo">
                            <div class="progress-indicator">
                                <div class="progress-step active">
                                    <div class="progress-circle">1</div>
                                    <small>Registro</small>
                                </div>
                                <div class="progress-step">
                                    <div class="progress-circle">2</div>
                                    <small>Vehículo</small>
                                </div>
                                <div class="progress-step">
                                    <div class="progress-circle">3</div>
                                    <small>Pago</small>
                                </div>
                            </div>
                            
                            <div class="form-field">
                                <label>Nombre completo</label>
                                <input type="text" id="nameField" placeholder="Ingresa tu nombre">
                            </div>
                            
                            <div class="form-field">
                                <label>Correo electrónico</label>
                                <input type="email" id="emailField" placeholder="tu@email.com">
                            </div>
                            
                            <div class="form-field">
                                <label>Teléfono</label>
                                <input type="tel" id="phoneField" placeholder="55 1234 5678">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Scene 4: Success -->
        <div class="scene scene-success" data-duration="10000">
            <div class="success-content">
                <div class="success-icon">✓</div>
                <h2 class="success-message">¡Listo en 5 minutos!</h2>
                
                <div class="permit-preview">
                    <h3 style="color: #B5384D; margin-bottom: 15px;">Permiso Digital</h3>
                    <p><strong>Folio:</strong> PD-2024-123456</p>
                    <p><strong>Vigencia:</strong> 30 días</p>
                    <p><strong>Vehículo:</strong> Toyota Corolla 2023</p>
                    <div style="margin-top: 20px; padding: 20px; background: #f5f5f5; border-radius: 5px;">
                        <p style="text-align: center; color: #666;">Código QR</p>
                    </div>
                </div>
            </div>
            
            <!-- Success particles -->
            <div class="particles-container" id="particlesContainer"></div>
        </div>
        
        <!-- Scene 5: CTA -->
        <div class="scene scene-cta" data-duration="17000">
            <h1 class="logo-large">Permisos Digitales</h1>
            <p class="cta-message">Tu tiempo vale</p>
            <a href="#" class="cta-button">Obtén tu permiso AHORA</a>
            <p class="url-display">permisosdigitales.com.mx</p>
        </div>
    </div>
    
    <!-- Video Progress Bar -->
    <div class="video-progress">
        <div class="video-progress-fill" id="progressFill"></div>
    </div>
    
    <!-- Scene Timer (Hidden, press T to show) -->
    <div class="scene-timer" id="sceneTimer">
        Scene <span id="currentScene">1</span>/5 - <span id="timeRemaining">8</span>s
    </div>
    
    <!-- Play State Indicator -->
    <div style="position: fixed; top: 20px; left: 20px; background: rgba(0,0,0,0.8); color: white; padding: 10px 20px; border-radius: 20px; z-index: 10000; font-size: 14px;">
        <span id="playState">▶ Playing</span> | Press SPACE to pause, T for timer
    </div>
    
    <script>
        // Video Controller
        class PromoVideo {
            constructor() {
                this.scenes = document.querySelectorAll('.scene');
                this.currentScene = 0;
                this.isPlaying = true;
                this.totalDuration = 60000; // 60 seconds
                this.startTime = Date.now();
                this.sceneTimeouts = [];
                this.cursor = document.getElementById('cursor');
                
                this.init();
            }
            
            init() {
                this.startVideo();
                this.setupKeyboardControls();
                this.updateProgress();
            }
            
            startVideo() {
                // Scene timing - adjusted to match 60 seconds total
                const sceneDurations = [8000, 5000, 20000, 10000, 17000]; // Total: 60s
                let accumulatedTime = 0;
                
                sceneDurations.forEach((duration, index) => {
                    if (index > 0) {
                        accumulatedTime += sceneDurations[index - 1];
                        const timeout = setTimeout(() => {
                            if (this.isPlaying) {
                                this.showScene(index);
                            }
                        }, accumulatedTime);
                        this.sceneTimeouts.push(timeout);
                    }
                });
                
                // Start animations for first scene
                this.animateScene(0);
                
                // Loop video
                setTimeout(() => {
                    if (this.isPlaying) {
                        this.restart();
                    }
                }, this.totalDuration);
            }
            
            showScene(index) {
                console.log(`Showing scene ${index + 1}`);
                this.scenes.forEach(scene => scene.classList.remove('active'));
                this.currentScene = index;
                
                if (this.scenes[index]) {
                    this.scenes[index].classList.add('active');
                    this.animateScene(index);
                    this.updateSceneTimer();
                } else {
                    console.error(`Scene ${index} not found`);
                }
            }
            
            animateScene(index) {
                // Reset cursor
                this.cursor.classList.remove('visible', 'clicking');
                
                switch(index) {
                    case 0: // Problem scene
                        this.animateProblemScene();
                        break;
                    case 1: // Discovery scene
                        this.animateDiscoveryScene();
                        break;
                    case 2: // Demo scene
                        this.animateDemoScene();
                        break;
                    case 3: // Success scene
                        this.animateSuccessScene();
                        break;
                    case 4: // CTA scene
                        this.animateCTAScene();
                        break;
                }
            }
            
            animateProblemScene() {
                // Animate people appearing
                const people = document.querySelectorAll('.person');
                people.forEach((person, i) => {
                    setTimeout(() => person.classList.add('show'), i * 100);
                });
                
                // Animate clock
                const clock = document.getElementById('clock');
                let hours = 11;
                let minutes = 47;
                
                const clockInterval = setInterval(() => {
                    minutes += 3;
                    if (minutes >= 60) {
                        hours++;
                        minutes = minutes - 60;
                    }
                    clock.textContent = `${hours}:${minutes.toString().padStart(2, '0')}`;
                }, 300);
                
                setTimeout(() => clearInterval(clockInterval), 7000);
            }
            
            animateDiscoveryScene() {
                // Animate cursor to search result
                setTimeout(() => {
                    this.cursor.classList.add('visible');
                    this.moveCursor(window.innerWidth/2, window.innerHeight/2 + 100);
                }, 3000);
                
                setTimeout(() => {
                    this.cursor.classList.add('clicking');
                    document.querySelector('.result-item.highlight').style.background = '#FFE5B4';
                }, 4000);
            }
            
            animateDemoScene() {
                const fields = document.querySelectorAll('.form-field');
                const steps = document.querySelectorAll('.progress-step');
                
                // Show form fields one by one
                fields.forEach((field, i) => {
                    setTimeout(() => field.classList.add('show'), i * 1000);
                });
                
                // Animate cursor filling form
                setTimeout(() => {
                    this.cursor.classList.add('visible');
                    this.animateFormFilling();
                }, 2000);
                
                // Progress steps
                setTimeout(() => steps[0].classList.add('completed'), 5000);
                setTimeout(() => {
                    steps[0].classList.remove('active');
                    steps[1].classList.add('active');
                }, 7000);
                setTimeout(() => steps[1].classList.add('completed'), 10000);
                setTimeout(() => {
                    steps[1].classList.remove('active');
                    steps[2].classList.add('active');
                }, 12000);
                setTimeout(() => steps[2].classList.add('completed'), 15000);
            }
            
            animateFormFilling() {
                // Animate typing in form fields
                const animations = [
                    { field: 'nameField', text: 'María González', delay: 0 },
                    { field: 'emailField', text: 'maria@email.com', delay: 3000 },
                    { field: 'phoneField', text: '55 1234 5678', delay: 6000 }
                ];
                
                animations.forEach(({ field, text, delay }) => {
                    setTimeout(() => {
                        const input = document.getElementById(field);
                        if (input) {
                            const rect = input.getBoundingClientRect();
                            this.moveCursor(rect.left + 100, rect.top + 20);
                            
                            setTimeout(() => {
                                this.cursor.classList.add('clicking');
                                this.typeText(input, text);
                                setTimeout(() => this.cursor.classList.remove('clicking'), 300);
                            }, 500);
                        }
                    }, delay);
                });
            }
            
            animateSuccessScene() {
                // Create celebration particles
                const container = document.getElementById('particlesContainer');
                if (container) {
                    for (let i = 0; i < 50; i++) {
                        setTimeout(() => {
                            const particle = document.createElement('div');
                            particle.className = 'particle animate';
                            particle.style.left = `${Math.random() * 100}%`;
                            particle.style.animationDelay = `${Math.random() * 0.5}s`;
                            container.appendChild(particle);
                        }, i * 50);
                    }
                }
            }
            
            animateCTAScene() {
                // Pulse CTA button
                setTimeout(() => {
                    const ctaButton = document.querySelector('.cta-button');
                    if (ctaButton) {
                        ctaButton.style.animation = 'pulse 1s ease-in-out infinite';
                    }
                }, 2000);
            }
            
            moveCursor(x, y) {
                this.cursor.style.left = `${x}px`;
                this.cursor.style.top = `${y}px`;
            }
            
            typeText(input, text) {
                let i = 0;
                const typeInterval = setInterval(() => {
                    if (i < text.length) {
                        input.value = text.substring(0, i + 1);
                        i++;
                    } else {
                        clearInterval(typeInterval);
                    }
                }, 100);
            }
            
            updateProgress() {
                const progressFill = document.getElementById('progressFill');
                
                const updateLoop = () => {
                    const elapsed = Date.now() - this.startTime;
                    const progress = (elapsed / this.totalDuration) * 100;
                    progressFill.style.width = `${Math.min(progress, 100)}%`;
                    
                    if (progress < 100 && this.isPlaying) {
                        requestAnimationFrame(updateLoop);
                    } else if (progress >= 100) {
                        // Video completed, restart will be triggered by timeout
                        console.log('Video completed');
                    }
                };
                
                updateLoop();
            }
            
            updateSceneTimer() {
                const timer = document.getElementById('sceneTimer');
                const currentSceneEl = document.getElementById('currentScene');
                const timeRemainingEl = document.getElementById('timeRemaining');
                
                if (timer && timer.classList.contains('visible')) {
                    currentSceneEl.textContent = this.currentScene + 1;
                    const duration = parseInt(this.scenes[this.currentScene].dataset.duration) / 1000;
                    timeRemainingEl.textContent = duration;
                    
                    let remaining = duration;
                    const countdown = setInterval(() => {
                        remaining--;
                        timeRemainingEl.textContent = remaining;
                        if (remaining <= 0) clearInterval(countdown);
                    }, 1000);
                }
            }
            
            restart() {
                console.log('Restarting video...');
                // Clear all timeouts
                this.sceneTimeouts.forEach(timeout => clearTimeout(timeout));
                this.sceneTimeouts = [];
                
                // Reset progress bar
                document.getElementById('progressFill').style.width = '0%';
                
                // Reset to first scene
                this.currentScene = 0;
                this.startTime = Date.now();
                this.showScene(0);
                this.startVideo();
                this.updateProgress();
            }
            
            setupKeyboardControls() {
                document.addEventListener('keydown', (e) => {
                    switch(e.key.toLowerCase()) {
                        case ' ':
                            e.preventDefault();
                            this.togglePlayPause();
                            break;
                        case 'r':
                            this.restart();
                            break;
                        case 't':
                            document.getElementById('sceneTimer').classList.toggle('visible');
                            break;
                        case 'arrowright':
                            this.nextScene();
                            break;
                        case 'arrowleft':
                            this.previousScene();
                            break;
                    }
                });
            }
            
            togglePlayPause() {
                this.isPlaying = !this.isPlaying;
                const playStateEl = document.getElementById('playState');
                
                if (!this.isPlaying) {
                    this.sceneTimeouts.forEach(timeout => clearTimeout(timeout));
                    playStateEl.textContent = '⏸ Paused';
                } else {
                    playStateEl.textContent = '▶ Playing';
                    // Resume from current position
                    this.updateProgress();
                }
            }
            
            nextScene() {
                if (this.currentScene < this.scenes.length - 1) {
                    this.showScene(this.currentScene + 1);
                }
            }
            
            previousScene() {
                if (this.currentScene > 0) {
                    this.showScene(this.currentScene - 1);
                }
            }
        }
        
        // Start video when page loads
        window.addEventListener('load', () => {
            new PromoVideo();
        });
    </script>
</body>
</html>